import 'package:email_validator/email_validator.dart';import 'package:firebase_auth/firebase_auth.dart';import 'package:flutter/material.dart';import 'package:flutter/services.dart';import 'package:google_fonts/google_fonts.dart';import 'Component.dart';import 'login.widget.dart';class Forgot extends StatefulWidget {  @override  _ForgotState createState() => _ForgotState();}class _ForgotState extends State<Forgot> {  TextEditingController email_controller = new TextEditingController();  final _formKey = GlobalKey<FormState>();  final GlobalKey<ScaffoldState> _scaffoldKey = new GlobalKey<ScaffoldState>();  @override  Widget build(BuildContext context) {    return Scaffold(        key: _scaffoldKey,        body: AnnotatedRegion<SystemUiOverlayStyle>(          value: SystemUiOverlayStyle.light,          child: GestureDetector(            child: Stack(              children: [                Container(                  height: double.infinity,                  width: double.infinity,                  decoration: BoxDecoration(                    gradient: LinearGradient(                        begin: Alignment.topCenter,                        end: Alignment.bottomCenter,                        colors: [                          Color.fromRGBO(253, 183, 119, 1),                          Color.fromRGBO(253, 167, 102, 1),                          Color.fromRGBO(253, 147, 70, 1),                          Color.fromRGBO(253, 127, 44, 1)                        ]),                  ),                  child: Padding(                    padding: EdgeInsets.symmetric(horizontal: 20),                    child: Column(                      mainAxisAlignment: MainAxisAlignment.center,                      children: [                        Center(                            child: Text(                              "إسترجاع الحساب",                              style: GoogleFonts.tajawal(                                color: Colors.white,                                fontSize: 40,                                fontWeight: FontWeight.w400,                              ),                            )),                        SizedBox(                          height: 50,                        ),                        Column(                          crossAxisAlignment: CrossAxisAlignment.end,                          children: [                            Container(                                alignment: Alignment.centerRight,                                child: Text("البريد الإلكتروني : ",                                    textDirection: TextDirection.rtl,                                    style: GoogleFonts.tajawal(                                        color: Colors.white,                                        fontSize: 16,                                        fontWeight: FontWeight.bold))),                            SizedBox(                              height: 10,                            ),                            Container(                              alignment: Alignment.centerLeft,                              decoration: BoxDecoration(                                  color: Colors.white,                                  borderRadius: BorderRadius.circular(10),                                  boxShadow: [                                    BoxShadow(                                      color: Colors.black26,                                      blurRadius: 6,                                      offset: Offset(0, 3),                                    )                                  ]),                              height: 60,                              child: Theme(                                  data: new ThemeData(                                    primaryColor: Colors.white,                                    primaryColorDark: Colors.white,                                  ),                                  child: TextField(                                    controller: email_controller,                                    keyboardType: TextInputType.emailAddress,                                    style: TextStyle(                                      color: Colors.black87,                                    ),                                    decoration: InputDecoration(                                        border: InputBorder.none,                                        contentPadding: EdgeInsets.only(top: 14),                                        prefixIcon: Icon(Icons.email,                                            color: Color.fromRGBO(253, 127, 44, 1)),                                        hintText: "البريد الإلكتروني",                                        hintStyle: GoogleFonts.tajawal(                                            color: Colors.black87)),                                  )),                            ),                            SizedBox(                              height: 10,                            ),                            Container(                              padding: EdgeInsets.symmetric(vertical: 25),                              width: double.infinity,                              child: RaisedButton(                                onPressed: () {                                  if (EmailValidator.validate(                                      email_controller.text)) {                                    FirebaseAuth.instance.sendPasswordResetEmail(                                        email: email_controller.text).then((value) {                                      afficher("تم إرسال ايميل لإسترجاع حسابك");                                    }).catchError((error){                                      afficher("يرجى إدخال بريد إلكتروني صحيح ");                                    });                                  }else {                                    afficher("يرجى إدخال بريد إلكتروني صحيح ");                                  }                                },                                elevation: 5,                                padding: EdgeInsets.all(15),                                shape: RoundedRectangleBorder(                                  borderRadius: BorderRadius.circular(15),                                ),                                color: Colors.white,                                child: Text(                                  "إسترجاع الحساب",                                  style: GoogleFonts.tajawal(                                      color: Color.fromRGBO(253, 127, 44, 1),                                      fontWeight: FontWeight.bold),                                ),                              ),                            ),                            SizedBox(                              height: 10,                            ),                            Center(                                child: GestureDetector(                                    onTap: () => Navigator.push(context, MaterialPageRoute(builder: (context) =>                                        Login())),                                    child: RichText(                                      text: TextSpan(children: [                                        TextSpan(                                            text: " لديك حساب  ? ",                                            style: GoogleFonts.tajawal(                                                color: Colors.white,                                                fontSize: 10,                                                fontWeight: FontWeight.bold)),                                        TextSpan(                                            text: "تسجيل الدخول",                                            style: GoogleFonts.tajawal(                                                color: Colors.white,                                                fontWeight: FontWeight.bold,                                                fontSize: 12))                                      ]),                                    )))                          ],                        ),                      ],                    ),                  ),                )              ],            ),          ),        )    );  }  void afficher(String text) {    _scaffoldKey.currentState.showSnackBar(SnackBar(        content: Text(          text,style: GoogleFonts.tajawal          (),textDirection:        TextDirection.rtl,))) ;  }}